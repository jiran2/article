# 文章总览

1. 索引Mapping
2. 常用字段类型应用
3. 符合字段类型应用
4. 字段类型自动检测应用
5. 字段模型设计
6. 索引字段类型设计限制
7. 课后回顾和作业

# 索引Mapping

Mapping是设置索引数据模型，限制索引数据模型字段内容的设置

## 创建Mapping

- 创建索引，设定字段的类型

  ```
  PUT gupaoedu-company-001
  {
      "properties": {
        "companyName":{
          "type": "text"
        },
        "createDate":{
          "type": "date"
        },
        "city":{
          "type": "text"
        }
      }
    }
  }
  ```

- 查看索引

  ```mysql
  GET /gupaoedu-company-001/_mapping
  ```

- 更新索引mapping
  只是新增键，不是更新之前的索引键

  ```
  #更新索引mapping
  PUT gupaoedu-company-001/_mapping
  {
      "properties": {
        "companyName":{
          "type": "text"
        },
        "createDate":{
          "type": "date"
        },
        "city":{
          "type": "keyword"
        },
        "home":{
          "type":"text"
        }
    }
  }
  ```

原始数据

- 启动/禁用
  启动`"enabled": true`
  禁用`"enabled": false`

  ```
  PUT gupaoedu-company-001
  {
    "mappings": {
      "_source": {
        "enabled": true
      }
    }
  }
  ```

- 启用部分

  ```mysql
  PUT gupaoedu-company-001
  {
    "mappings": {
      "_source": {
        "includes":[
          "companyName",
          "cit.*"
          ]
      }, 
      "properties": {
        "companyName":{
          "type": "text"
        },
        "createDate":{
          "type": "date"
        },
        "city":{
          "type": "keyword"
        }
      }
    }
  }
  ```

- 禁用部分

  ```mysql
  #哪些源数据不被保存
  PUT gupaoedu-company-001
  {
    "mappings": {
      "_source": {
        "excludes": [
          "companyName",
          "cit.*"
        ]
      },
      "properties": {
        "companyName": {
          "type": "text"
        },
        "createDate": {
          "type": "date"
        },
        "city": {
          "type": "keyword"
        }
      }
    }
  }
  ```

  



<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124153812895.png" alt="image-20210124153812895" style="zoom:50%;" align='left'/>



# 字符串

## 文本

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124154037193.png" alt="image-20210124154037193" style="zoom:50%;" align='left'/>

## 关键字

<img src="C:\Users\jiran\AppData\Roaming\Typora\typora-user-images\image-20210124154151300.png" alt="image-20210124154151300" style="zoom:50%;" align='left'/>

# 数值类型

## 整数

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124154631815.png" alt="image-20210124154631815" style="zoom:50%;" align='left'/>

## 浮点数

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124155117125.png" alt="image-20210124155117125" style="zoom:50%;" align='left'/>

# 日期类型

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124155625154.png" alt="image-20210124155625154" style="zoom:50%;" align='left'/>

# 背后算法

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124160537791.png" alt="image-20210124160537791" style="zoom:50%;" align='left'/>

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124160546016.png" alt="image-20210124160546016" style="zoom:50%;" align='left'/>

# 复杂类型

## object

最多三层

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124160622020.png" alt="image-20210124160622020" style="zoom:50%;" align='left' />

# 作业

<img src="https://gitee.com/tworan/typora-img/raw/master/imgs/image-20210124161709736.png" alt="image-20210124161709736" style="zoom:50%;" align='left'/>